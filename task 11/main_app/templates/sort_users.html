{% extends "base.html" %}
{% load static %}
{% block title %}–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π{% endblock %}
{% block content %}
<div class="header">
    <h2>üîÑ –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</h2>
    <a href="{% url 'user_list' %}" class="btn btn-secondary">üë• –û–±—ã—á–Ω—ã–π —Å–ø–∏—Å–æ–∫</a>
</div>

<div class="sort-info">
    <div>
        <strong>–¢–µ–∫—É—â–∞—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞:</strong> 
        <span class="sort-badge">–ü–æ {{ sort_field }} ({{ sort_dir }})</span>
    </div>
    <div class="sort-controls">
        <a href="{% url 'sort_users' 'id' 'up' %}" class="btn btn-info" {% if current_field == 'id' and current_dir == 'up' %}style="background: rgba(255,255,255,0.3);"{% endif %}>ID ‚Üë</a>
        <a href="{% url 'sort_users' 'id' 'dn' %}" class="btn btn-info" {% if current_field == 'id' and current_dir == 'dn' %}style="background: rgba(255,255,255,0.3);"{% endif %}>ID ‚Üì</a>
        <a href="{% url 'sort_users' 'name' 'up' %}" class="btn btn-info" {% if current_field == 'name' and current_dir == 'up' %}style="background: rgba(255,255,255,0.3);"{% endif %}>–ò–º—è ‚Üë</a>
        <a href="{% url 'sort_users' 'name' 'dn' %}" class="btn btn-info" {% if current_field == 'name' and current_dir == 'dn' %}style="background: rgba(255,255,255,0.3);"{% endif %}>–ò–º—è ‚Üì</a>
        <a href="{% url 'sort_users' 'age' 'up' %}" class="btn btn-info" {% if current_field == 'age' and current_dir == 'up' %}style="background: rgba(255,255,255,0.3);"{% endif %}>–í–æ–∑—Ä–∞—Å—Ç ‚Üë</a>
        <a href="{% url 'sort_users' 'age' 'dn' %}" class="btn btn-info" {% if current_field == 'age' and current_dir == 'dn' %}style="background: rgba(255,255,255,0.3);"{% endif %}>–í–æ–∑—Ä–∞—Å—Ç ‚Üì</a>
    </div>
</div>

<div class="sort-nav">
    <span>üöÄ –ë—ã—Å—Ç—Ä—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏:</span>
    <a href="{% url 'sort_users' 'id' 'up' %}">–ü–æ ID (–Ω–æ–≤—ã–µ –ø–µ—Ä–≤—ã–º–∏)</a>
    <a href="{% url 'sort_users' 'name' 'up' %}">–ü–æ –∏–º–µ–Ω–∏ (–ê-–Ø)</a>
    <a href="{% url 'sort_users' 'age' 'dn' %}">–ü–æ –≤–æ–∑—Ä–∞—Å—Ç—É (—Å—Ç–∞—Ä—à–∏–µ –ø–µ—Ä–≤—ã–º–∏)</a>
    <a href="{% url 'sort_users' 'age' 'up' %}">–ü–æ –≤–æ–∑—Ä–∞—Å—Ç—É (–º–ª–∞–¥—à–∏–µ –ø–µ—Ä–≤—ã–º–∏)</a>
</div>

{% if user_data %}
    {% for user in user_data %}
    <div class="user-card">
        <h3>{{ user.name }}</h3>
        <div class="user-info">
            <strong>üÜî ID:</strong> {{ user.id }}
        </div>
        <div class="user-info">
            <strong>üìß Email:</strong> {{ user.email }}
        </div>
        <div class="user-info">
            <strong>üì± –¢–µ–ª–µ—Ñ–æ–Ω:</strong> {{ user.phone }}
        </div>
        <div class="user-info">
            <strong>üéÇ –í–æ–∑—Ä–∞—Å—Ç:</strong> {{ user.age }} –ª–µ—Ç
        </div>
        <div class="user-info">
            <strong>üìÖ –°–æ–∑–¥–∞–Ω:</strong> {{ user.created_at|date:"d.m.Y H:i" }}
        </div>
        
        <div class="actions">
            <a href="{% url 'user_profile' user.id %}" class="btn btn-success">üëÅÔ∏è –ü—Ä–æ—Å–º–æ—Ç—Ä</a>
            <a href="{% url 'edit_profile' user.id %}" class="btn">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
            <form method="post" action="{% url 'delete_user' user.id %}" style="display: inline;">
                {% csrf_token %}
                <button type="submit" class="btn btn-danger">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å</button>
            </form>
        </div>
    </div>
    {% endfor %}
{% else %}
    <div class="user-card">
        <h3>üòî –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</h3>
        <p>–í —Å–∏—Å—Ç–µ–º–µ –ø–æ–∫–∞ –Ω–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –¥–ª—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏.</p>
        <a href="{% url 'create_profile' %}" class="btn">‚ûï –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</a>
    </div>
{% endif %}

<script src={% static "script_sort.js" %}></script>


{% endblock %}